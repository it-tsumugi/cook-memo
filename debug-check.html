<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CookMemo Debug Check</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .info { color: blue; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>CookMemo Debug Check</h1>
    
    <div class="section">
        <h2>基本情報</h2>
        <p id="url-info" class="info"></p>
        <p id="timestamp" class="info"></p>
    </div>
    
    <div class="section">
        <h2>環境変数チェック</h2>
        <p id="env-check"></p>
        <div id="env-details"></div>
    </div>
    
    <div class="section">
        <h2>リソース読み込みチェック</h2>
        <p id="resource-check"></p>
    </div>
    
    <div class="section">
        <h2>次のステップ</h2>
        <div id="next-steps"></div>
    </div>

    <script>
        // 基本情報
        document.getElementById('url-info').textContent = `URL: ${window.location.href}`;
        document.getElementById('timestamp').textContent = `チェック時刻: ${new Date().toLocaleString()}`;
        
        // 環境変数チェック（フロントエンドでは実際の値は見えないが、ビルド時に存在するかチェック）
        const envCheck = document.getElementById('env-check');
        const envDetails = document.getElementById('env-details');
        
        // GitHub Pagesでは環境変数は見えないが、ビルド時の状況を推測
        if (window.location.hostname === 'it-tsumugi.github.io') {
            envCheck.innerHTML = '<span class="info">GitHub Pages環境を検出</span>';
            envDetails.innerHTML = `
                <p>⚠️ Repository Secretsの設定が必要です:</p>
                <ul>
                    <li>VITE_SUPABASE_URL</li>
                    <li>VITE_SUPABASE_ANON_KEY</li>
                </ul>
                <p>設定手順: <a href="https://github.com/it-tsumugi/cook-memo/settings/secrets/actions" target="_blank">Repository Secrets</a></p>
            `;
        } else {
            envCheck.innerHTML = '<span class="info">ローカル環境を検出</span>';
        }
        
        // リソースチェック
        const resourceCheck = document.getElementById('resource-check');
        const links = document.querySelectorAll('link[rel="stylesheet"]');
        const scripts = document.querySelectorAll('script[src]');
        
        resourceCheck.innerHTML = `
            <p>CSS ファイル: ${links.length} 個</p>
            <p>JS ファイル: ${scripts.length} 個</p>
        `;
        
        // 次のステップ
        const nextSteps = document.getElementById('next-steps');
        if (window.location.hostname === 'it-tsumugi.github.io') {
            nextSteps.innerHTML = `
                <ol>
                    <li><a href="https://github.com/it-tsumugi/cook-memo/settings/secrets/actions" target="_blank">Repository Secrets</a> を設定</li>
                    <li><a href="https://github.com/it-tsumugi/cook-memo/actions" target="_blank">GitHub Actions</a> で再デプロイ</li>
                    <li><a href="https://it-tsumugi.github.io/cook-memo/" target="_blank">CookMemo</a> にアクセスして確認</li>
                </ol>
            `;
        } else {
            nextSteps.innerHTML = '<p>ローカル環境では npm run dev で開発サーバーを起動してください。</p>';
        }
        
        // デバッグ情報をコンソールに出力
        console.log('=== CookMemo Debug Information ===');
        console.log('URL:', window.location.href);
        console.log('Hostname:', window.location.hostname);
        console.log('Pathname:', window.location.pathname);
        console.log('User Agent:', navigator.userAgent);
        console.log('Screen Resolution:', screen.width + 'x' + screen.height);
        console.log('Viewport:', window.innerWidth + 'x' + window.innerHeight);
    </script>
</body>
</html>